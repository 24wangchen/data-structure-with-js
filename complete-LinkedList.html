<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title></title>
</head>
<body>

<script>
  function List(){
    this.head = null;
    this.tail = null;
  }

  List.makeNode = function(){
    return {
      data: null,
      next: null
    };
  };

  List.prototype = {
    add: function(data){
      if(this.head === null){
        this.head = List.makeNode();
        this.tail = this.head;
      } else {
        this.tail.next = List.makeNode();
        this.tail = this.tail.next;
      }

      this.tail.data = data;
    },
    'delete': function(data){
      var current = this.head;
      var previous = this.head;

      while(current !== null){
        if(data === current.data){
          if(current === this.head){
            this.head = current.next;
            return;
          }

          if(current === this.tail) this.tail = previous;

          previous.next = current.next;
          return;
        }

        previous = current;
        current = current.next;
      }
    },
    insertAsFirst: function(data){
      var temp = List.makeNode();
      temp.next = this.head;
      this.head = temp;
      temp.data = data;
    },
    insertAfter: function(target, data){
      var current = this.head;
      while(current !== null){
        if(current.data === target){
          var temp = List.makeNode();
          temp.data = data;
          temp.next = current.next;

          if(current === this.tail) this.tail = temp;

          current.next = temp;
          return;
        }

        current = current.next;
      }
    },
    item: function(index){
      var current = this.head;

      while(current !== null){
        if(--index === 0) return current;

        current = current.next;
      }

      return null;
    },
    each: function(callback){
      var current = this.head;

      while(current !== null){
        callback(current);
        current = current.next;
      }
    }
  };

  var list = new List();
  list.add('b');
  list.insertAsFirst('a');
  list.insertAfter('c');
  console.log(list.item(2));
  console.log(JSON.stringify(list));
  list.each(function(node){
    if(node.data === 'b'){
      console.log('get b in each');
    }
  });
  list['delete']('c');
  list['delete']('a');
  console.log(list);

</script>
</body>
</html>