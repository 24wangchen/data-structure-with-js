<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>队列</title>
</head>
<body>

<script>
  /**
   * 队列Queue
   *
   * 队列是一种先进先出（first in first out, FIFO）的线性表。它只允许在表的一端进行插入，而在另一端删除元素。
   * 允许插入的一端叫队尾（rear），允许删除的一端叫队头（front）。
   */

  function Queue(){
    this.rear = this.front = null;
    this.size = 0;
  }
  Queue.prototype = {
    clear: function(){
      this.rear = this.front = null;
      this.size = 0;
    },
    getHead: function(){
      return this.front ? this.front.data : null;
    },
    enQueue: function(elem){
      if(this.front === null){
        this.rear = this.front = {data: elem, next: null};
      } else {
        var p = {data: elem, next: null};
        this.rear.next = p;
        this.rear = p;
      }
      this.size++;
    },
    deQueue: function(){
      if(this.front){
        var elem = this.front.data;
        this.front = this.front.next;
        if(this.front === null){
          this.rear = null;
        }
        this.size--;
        return elem;
      } else {
        return null;
      }
    },
    queueTraverse: function(iterator){
      var current = this.front;
      while(current){
        if(iterator(current.data) === false) break;
        current = current.next;
      }
    }
  };

  var queue = new Queue();
  queue.enQueue(1);
  queue.deQueue();
  queue.enQueue(2);
  queue.enQueue(3);

  function Queue2(){
    this.size = 0;
    this.front = null;
    this.rear = null;
  }
  Queue2.prototype = {
    enQueue: function(data){
      var node = {data: data, next: this.front};

      if(this.front === null){
        this.rear = node;
      }

      this.front = node;
      this.size++;
    },
    deQueue: function(){
      if(this.rear === null){
        return null;
      }

      var current = this.front;
      var previous = current;

      while(current.next){
        previous = current;
        current = current.next;
      }

      previous.next = null;
      this.rear = previous;

      if(this.size > 0) {
        this.size--;
      } else {
        this.front = null;
        this.rear = null;
      }
    },
    displayAll: function(){
      if(this.front === null){
        return null;
      }

      var arr = [];
      var current = this.front;

      for(var i = 0, len= this.size; i < len; i++){
        arr[i] = current.data;
        current = current.next;
      }

      return arr;
    },
    peekAt: function(index){
      index = index || 0;

      if(index < this.size){
        var current = this.front;

        for(var i = 0; i < index; i++){
          current = current.next;
        }
        return current.data;
      }

      return null;
    }
  };

  var queue = new Queue2();
  queue.enQueue(1);
  queue.deQueue();
  queue.enQueue(2);
  queue.enQueue(3);
</script>
</body>
</html>